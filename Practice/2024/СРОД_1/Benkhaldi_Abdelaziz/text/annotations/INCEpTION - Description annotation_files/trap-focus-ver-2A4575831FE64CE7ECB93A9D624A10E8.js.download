(function(c,l,d,r){function m(g){return g.find("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(":visible, *:not([tabindex\x3d-1])")}if(!l.Wicket||!l.Wicket.trapFocus){c.event.special.trapfocusremove={remove:function(g){g.handler()}};var e=c.noop;l.Wicket.trapFocus=function(g,h){var a=c("#"+g),k=d.activeElement;Wicket.Log.debug("trap-focus: focus was on element",k);
a.attr("tabindex",0);a.on("keydown",function(b){if(9===Wicket.Event.keyCode(b)){var f=m(a);if(0<f.length){var n=f.get(0);f=f.get(f.length-1);if(b.shiftKey){if(b.target===n||a.is(b.target))b.preventDefault(),f.focus()}else if(b.target===f||a.is(b.target))b.preventDefault(),n.focus()}}});var p=c("."+h).removeClass(h);a.addClass(h);var q=e;c(d).off("focusin",e);m(a).first().focus();e=function(){c.contains(a[0],d.activeElement)||a[0]===d.activeElement||m(a).first().focus()};c(d).on("focusin",e);a.on("trapfocusremove",
function(){c(d).off("focusin",e);if(k)try{k.focus(),Wicket.Log.debug("trap-focus: restored focus to element ",k)}catch(b){Wicket.Log.error("trap-focus: error restoring focus. Attempted to set focus to element, but got an exception",k,b)}e=q;c(d).on("focusin",e);p.addClass(h);a.removeClass(h)})}}})(jQuery,window,document,void 0);